---
## Front matter
title: "Лабораторная работа №2"
subtitle: "Измерение
и тестирование пропускной способности сети.
Интерактивный эксперимент"
author: "Барабанова Кристина"

## Generic options
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: false
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt

## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english

## I18n babel
babel-lang: russian
babel-otherlangs: english

## Fonts
mainfont: DejaVu Serif
sansfont: DejaVu Sans
monofont: DejaVu Sans Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric

## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"

## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Основной целью работы является знакомство с инструментом для измерения
пропускной способности сети в режиме реального времени — iPerf3, а также
получение навыков проведения интерактивного эксперимента по измерению
пропускной способности моделируемой сети в среде Mininet.


# Задание

1. Установить на виртуальную машину mininet iPerf3 и дополнительное программное обеспечения для визуализации и обработки данных.
2. Провести ряд интерактивных экспериментов по измерению пропускной
способности с помощью iPerf3 с построением графиков.


# Выполнение лабораторной работы

## 1. Установка необходимого программного обеспечения

Запустила виртуальную среду с mininet.

Из основной ОС подключилась к виртуальной машине:

![рис. 1](images/1.png){#fig:001 width=70%}

После подключения к виртуальной машине mininet посмотрите IP-адреса
машины:

![](images/2.png){#fig:002 width=70%}

Обновите репозитории программного обеспечения на виртуальной машине:

![](images/3.png){#fig:003 width=70%}

Установите iperf3:

![](images/4.png){#fig:004 width=70%}

Установите необходимое дополнительное программное обеспечение на виртуальную машину:

![](images/5.png){#fig:005 width=70%}

Разверните iperf3_plotter. Для этого:
– перейдите во временный каталог и скачайте репозиторий:

![](images/6.png){#fig:006 width=70%}

– установите iperf3_plotter:

![](images/7.png){#fig:007 width=70%}



## 2. Интерактивные эксперименты

Задайте простейшую топологию, состоящую из двух хостов и коммутатора
с назначенной по умолчанию mininet сетью 10.0.0.0/8:

![](images/8.png){#fig:008 width=70%}

После введения этой команды запустятся терминалы двух хостов, коммутатора и контроллера. 


В терминале виртуальной машины посмотрите параметры запущенной в интерактивном режиме топологии:

![](images/9.png){#fig:009 width=70%}


Проведите простейший интерактивный эксперимент по измерению пропускной способности с помощью iPerf3:

В терминале h2 запустите сервер iPerf3:

![](images/10.png){#fig:010 width=70%}

В терминале хоста h1 запустите клиент iPerf3:

![](images/11.png){#fig:011 width=70%}



Проведите аналогичный эксперимент в интерфейсе mininet.
– Запустите сервер iPerf3 на хосте h2:
– Запустите клиент iPerf3 на хосте h1:
– Остановите серверный процесс:

![](images/12.png){#fig:012 width=70%}


Для указания iPerf3 периода времени для передачи можно использовать
ключ -t (или --time) — время в секундах для передачи (по умолчанию 10
секунд):
– В терминале h2 запустите сервер iPerf3:

![](images/13.png){#fig:013 width=70%}

– В терминале h1 запустите клиент iPerf3 с параметром -t, за которым
следует количество секунд:

![](images/14.png){#fig:014 width=70%}


Настройте клиент iPerf3 для выполнения теста пропускной способности
с 2-секундным интервалом времени отсчёта как на клиенте, так и на сервере.
Используйте опцию -i для установки интервала между отсчётами, измеряемого в секундах:
– В терминале h2 запустите сервер iPerf3:

![](images/15.png){#fig:015 width=70%}

– В терминале h1 запустите клиент iPerf3:

![](images/16.png){#fig:016 width=70%}


Задайте на клиенте iPerf3 отправку определённого объёма данных. Используйте опцию -n для установки количества байт для передачи:
– В терминале h2 запустите сервер iPerf3:

![](images/17.png){#fig:017 width=70%}

В терминале h1 запустите клиент iPerf3, задав объём данных 16 Гбайт:

![](images/18.png){#fig:018 width=70%}



Измените в тесте измерения пропускной способности iPerf3 протокол передачи данных с TCP (установлен по умолчанию) на UDP. iPerf3 автоматически
определяет протокол транспортного уровня на стороне сервера. Для изменения протокола используйте опцию -u на стороне клиента iPerf3:
– В терминале h2 запустите сервер iPerf3:

– В терминале h1 запустите клиент iPerf3, задав протокол UDP

![](images/19.png){#fig:019 width=70%}


В тесте измерения пропускной способности iPerf3 измените номер порта для отправки/получения пакетов или датаграмм через указанный порт.
Используйте для этого опцию -p:
– В терминале h2 запустите сервер iPerf3, используя параметр -p, чтобы
указать порт прослушивания:

![](images/20.png){#fig:020 width=70%}

– В терминале h1 запустите клиент iPerf3, указав порт:

![](images/21.png){#fig:021 width=70%}


По умолчанию после запуска сервер iPerf3 постоянно прослушивает входящие соединения. В тесте измерения пропускной способности iPerf3 задайте
для сервера параметр обработки данных только от одного клиента с остановкой сервера по завершении теста. Для этого используйте опцию -1 на
сервере iPerf3:
– В терминале h2 запустите сервер iPerf3, используя параметр -1, чтобы
принять только одного клиента:

![](images/22.png){#fig:022 width=70%}

– В терминале h1 запустите клиент iPerf3:

![](images/23.png){#fig:023 width=70%}



Экспортируйте результаты теста измерения пропускной способности iPerf3
в файл JSON:
– В виртуальной машине mininet создайте каталог для работы над проектом:

![](images/24.png){#fig:024 width=70%}

– В терминале h2 запустите сервер iPerf3:

– В терминале h1 запустите клиент iPerf3, указав параметр -J для отображения вывода результатов в формате JSON:

![](images/25.png){#fig:025 width=70%}


– Экспортируйте вывод результатов теста в файл, перенаправив стандартный вывод в файл

– Убедитесь, что файл iperf_results.json создан в указанном каталоге.



Визуализируйте результаты эксперимента:
– В виртуальной машине mininet исправьте права запуска X-соединения.
Скопируйте значение куки (MIT magic cookie)1
своего пользователя
mininet в файл для пользователя root:

![](images/26.png){#fig:026 width=70%}


В виртуальной машине mininet перейдите в каталог для работы над проектом, проверьте и при необходимости скорректируйте права доступа
к файлу JSON:

![](images/27.png){#fig:027 width=70%}


Сгенерируйте выходные данные для файла JSON iPerf3

![](images/28.png){#fig:028 width=70%}


Сценарий построения должен создать файл CSV (1.dat), который может
использоваться другими приложениями. В подкаталоге results каталога,
в котором был выполнен скрипт, сценарий должен создать графики для
следующих полей файла JSON:
– окно перегрузки (cwnd.pdf);
– повторная передача (retransmits.pdf);
– время приема-передачи (RTT.pdf);
– отклонение времени приема-передачи (RTT_Var.pdf);
– пропускная способность (throughput.pdf);
– максимальная единица передачи (MTU.pdf);
– количество переданных байтов (bytes.pdf).
– Убедитесь, что файлы с данными и графиками сформировались:

![](images/29.png){#fig:029 width=70%}



## Выводы

Я познакомство с инструментом для измерения
пропускной способности сети в режиме реального времени — iPerf3, а также
получила навыки проведения интерактивного эксперимента по измерению
пропускной способности моделируемой сети в среде Mininet.


---


