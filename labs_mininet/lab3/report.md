---
## Front matter
title: "Лабораторная работа №3"
subtitle: "Измерение и тестирование пропускной способности сети. Воспроизводимый эксперимент"
author: "Барабанова Кристина"

## Generic options
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: false
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt

## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english

## I18n babel
babel-lang: russian
babel-otherlangs: english

## Fonts
mainfont: DejaVu Serif
sansfont: DejaVu Sans
monofont: DejaVu Sans Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric

## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"

## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Основной целью работы является знакомство с инструментом для измерения
пропускной способности сети в режиме реального времени — iPerf3, а также получение навыков проведения воспроизводимого эксперимента по измерению пропускной способности моделируемой сети в среде Mininet.

# Задание

1. Воспроизвести посредством API Mininet эксперименты по измерению пропускной способности с помощью iPerf3.
2. Построить графики по проведённому эксперименту.



# Выполнение лабораторной работы

## 1. 

С помощью API Mininet создайте простейшую топологию сети, состоящую
из двух хостов и коммутатора с назначенной по умолчанию mininet сетью
10.0.0.0/8:
– В каталоге /work/lab_iperf3 для работы над проектом создайте подкаталог lab_iperf3_topo и скопируйте в него файл с примером скрипта
mininet/examples/emptynet.py, описывающего стандартную простую
топологию сети mininet:

![рис. 1](images/1.png){#fig:001 width=70%}


– Изучила содержание скрипта lab_iperf3_topo.py:

![рис. 2](images/2.png){#fig:002 width=70%}

Основные элементы:
– addSwitch(): добавляет коммутатор в топологию и возвращает имя
коммутатора;
– ddHost(): добавляет хост в топологию и возвращает имя хоста;
– addLink(): добавляет двунаправленную ссылку в топологию (и возвращает ключ ссылки; ссылки в Mininet являются двунаправленными, если
не указано иное);
– Mininet: основной класс для создания и управления сетью;
– start(): запускает сеть;
– pingAll(): проверяет подключение, пытаясь заставить все узлы пинговать друг друга;
– stop(): останавливает сеть;
– net.hosts: все хосты в сети;
– dumpNodeConnections(): сбрасывает подключения к/от набора узлов;
– setLogLevel( 'info' | 'debug' | 'output' ): устанавливает
уровень вывода Mininet по умолчанию; рекомендуется info.


– Запустила скрипт создания топологии lab_iperf3_topo.py:

![рис. 3](images/3.png){#fig:003 width=70%}


– После отработки скрипта посмотрела элементы топологии и завершите
работу mininet:

![рис. 4](images/4.png){#fig:004 width=70%}


## 2.

Внесите в скрипт lab_iperf3_topo.py изменение, позволяющее вывести
на экран информацию о хосте h1, а именно имя хоста, его IP-адрес, MACадрес. Для этого после строки, задающей старт работы сети, добавьте строку:

![рис. 5](images/5.png){#fig:005 width=70%}

Здесь:
– IP() возвращает IP-адрес хоста или определенного интерфейса;
– MAC() возвращает MAC-адрес хоста или определенного интерфейса.

---

## 3. 

Проверьте корректность отработки изменённого скрипта.


![рис. 6](images/6.png){#fig:006 width=70%}

---

## 4. 

Измените скрипт lab_iperf3_topo.py так, чтобы на экран выводилась информация об имени, IP-адресе и MAC-адресе обоих хостов сети. Проверьте
корректность отработки изменённого скрипта.

![рис. 7](images/7.png){#fig:007 width=70%}

![рис. 8](images/8.png){#fig:008 width=70%}


## 5. 

Mininet предоставляет функции ограничения производительности и изоляции с помощью классов CPULimitedHost и TCLink. Добавьте в скрипт
настройки параметров производительности:
– Сделайте копию скрипта lab_iperf3_topo.py:

![рис. 9](images/9.png){#fig:009 width=70%}


– В начале скрипта lab_iperf3_topo2.py добавьте записи об импорте
классов CPULimitedHost и TCLink

![рис. 10](images/10.png){#fig:010 width=70%}

В скрипте lab_iperf3_topo2.py измените строку описания сети, указав
на использование ограничения производительности и изоляции

 В скрипте lab_iperf3_topo2.py измените функцию задания параметров виртуального хоста h1, указав, что ему будет выделено 50% от общих
ресурсов процессора системы:

Аналогичным образом для хоста h2 задайте долю выделения ресурсов
процессора в 45%.

В скрипте lab_iperf3_topo2.py измените функцию параметров соединения между хостом h1 и коммутатором s3

![рис. 11](images/11.png){#fig:011 width=70%}

Здесь добавляется двунаправленный канал с характеристиками пропускной способности, задержки и потерь:
– параметр пропускной способности (bw) выражается числом в Мбит;
– задержка (delay) выражается в виде строки с заданными единицами
измерения (например, 5ms, 100us, 1s);
– потери (loss) выражаются в процентах (от 0 до 100);
– параметр максимального значения очереди (max_queue_size) выражается в пакетах;
– параметр use_htb указывает на использование ограничителя интенсивности входящего потока Hierarchical Token Bucket (HTB).


– Запустите на отработку сначала скрипт lab_iperf3_topo2.py, затем
lab_iperf3_topo.py и сравните результат.

![рис. 12](images/12.png){#fig:012 width=70%}


## 6. 

Постройте графики по проводимому эксперименту:
– Сделайте копию скрипта lab_iperf3_topo2.py и поместите его в подкаталог iperf:

![рис. 13](images/13.png){#fig:013 width=70%}


– В начале скрипта lab_iperf3.py добавьте запись

– Измените код в скрипте lab_iperf3.py так, чтобы:
– на хостах не было ограничения по использованию ресурсов процессора;
– каналы между хостами и коммутатором были по 100 Мбит/с с задержкой 75 мс, без потерь, без использования ограничителей пропускной
способности и максимального размера очереди.
– После функции старта сети опишите запуск на хосте h2 сервера iPerf3,
а на хосте h1 запуск с задержкой в 10 секунд клиента iPerf3 с экспортом
результатов в JSON-файл, закомментируйте строки, отвечающие за запуск
CLI-интерфейса:

![рис. 14](images/14.png){#fig:014 width=70%}


Запустите на отработку скрипт lab_iperf3.py:

![рис. 15](images/15.png){#fig:015 width=70%}


Постройте графики из получившегося JSON-файла:
 
![рис. 16](images/16.png){#fig:016 width=70%}


Создайте Makefile для проведения всего эксперимента:

В Makefile пропишите запуск скрипта эксперимента, построение графиков и очистку каталога от результатов:
 
![рис. 17](images/17.png){#fig:017 width=70%}

Проверьте корректность отработки Makefile:

![рис. 18](images/18.png){#fig:018 width=70%}


## 7. 

 Завершите соединение с виртуальной машиной mininet и выключите её.
 
## Вывод:

Я познакомилась с инструментом для измерения пропускной способности сети в режиме реального времени — iPerf3, а также получила навыки проведения воспроизводимого эксперимента по измерению пропускной способности моделируемой сети в среде Mininet.
 

---
